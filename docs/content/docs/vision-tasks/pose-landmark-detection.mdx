---
title: Pose Landmark Detection (Android Only)
description: Detect landmarks of human bodies in static images.
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { Step, Steps } from 'fumadocs-ui/components/steps';
import { File, Folder } from 'fumadocs-ui/components/files';

The `usePoseLandmarker` hook lets you detect landmarks of human bodies in static images. You can use this hook to identify key body locations, analyze posture, and categorize movements.

## Usage

Here is a basic example of how to use the `usePoseLandmarker` hook:

```tsx
import { usePoseLandmarker, type PoseLandmarkerResult } from 'react-native-aistack';
import { View, Button, Text } from 'react-native';

const MyComponent = () => {
  const { detect, isLoading, error } = usePoseLandmarker(
    { uri: 'https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/latest/pose_landmarker_lite.task' },
    { numPoses: 1 }
  );

  const handleDetect = async () => {
    try {
      const result:PoseLandmarkerResult = await detect({ uri: 'https://your-image-url.com/image.jpg' });
      console.log('Detection result:', result);
    } catch (e) {
      console.error('Detection failed:', e);
    }
  };

  return (
    <View>
      <Button
        title="Detect Pose Landmarks"
        onPress={handleDetect}
        disabled={isLoading}
      />
      {isLoading && <Text>Loading model...</Text>}
      {error && <Text>Error: {error.message}</Text>}
    </View>
  );
};
```

## Model

The `usePoseLandmarker` hook requires a trained pose landmarker model in TFLite format.

### Model Source

You can provide the model using one of the following sources:

- **URI:** The model is hosted on a remote server.
- **File Path:** The model is stored on the device's file system.
- **Bundle:** The model is included in your app's assets.

```ts
// From a remote URL
const modelSource = { uri: 'https://example.com/model.task' };

// From a local file path
const modelSource = { filePath: '/path/to/your/model.task' };

// From the app bundle
const modelSource = { bundle: 'pose_landmarker_lite.task' };
```

For more information on available models, see the [MediaPipe Pose Landmarker models documentation](https://ai.google.dev/edge/mediapipe/solutions/vision/pose_landmarker/index#models).

## Configuration

You can configure the pose landmarker with the following options:

### `PoseLandmarkerOptions`

| Option                       | Description                                                                         | Type      | Default |
| ---------------------------- | ----------------------------------------------------------------------------------- | --------- | ------- |
| `runningMode`                | The running mode for the task. Only `IMAGE` mode is supported.                      | `string`  | `IMAGE` |
| `delegate`                   | The hardware acceleration delegate. CPU is more compatible, GPU can be faster.      | `string`  | `CPU`   |
| `numPoses`                   | The maximum number of poses that can be detected.                                   | `number`  | `1`     |
| `minPoseDetectionConfidence` | The minimum confidence score for the pose detection to be considered successful.    | `number`  | `0.5`   |
| `minPosePresenceConfidence`  | The minimum confidence score of pose presence score in the pose landmark detection. | `number`  | `0.5`   |
| `minTrackingConfidence`      | The minimum confidence score for the pose tracking to be considered successful.     | `number`  | `0.5`   |
| `outputSegmentationMasks`    | Whether to output a segmentation mask for the detected pose.                        | `boolean` | `false` |

### `ImagePreprocessingOptions`

| Option      | Description                                | Type     | Default |
| ----------- | ------------------------------------------ | -------- | ------- |
| `rotation`  | The rotation to apply to the image in degrees. | `number` | `0`     |

## Result

The `detect` function returns a `PoseLandmarkerResult` object with the following properties:

### `PoseLandmarkerResult`

| Property             | Description                                            | Type                     |
| -------------------- | ------------------------------------------------------ | ------------------------ |
| `landmarks`      | A list of pose landmarks in image coordinates.         | `NormalizedLandmark[][]` |
| `worldLandmarks` | A list of pose landmarks in world coordinates.         | `Landmark[][]` |
| `segmentationMasks`  | Segmentation masks for the detected poses, if enabled. | `SegmentationMask[]`     |
| `timestampMs`        | The timestamp in milliseconds of the image processed.  | `number`                 |